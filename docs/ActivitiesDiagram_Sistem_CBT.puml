@startuml CBT_System_Activities_Diagram
!theme plain
skinparam backgroundColor white
skinparam defaultFontSize 10

title Activities Diagram - CBT System

|Admin|
start
:Create Exam;
note right
  Admin creates new 
  exam with metadata
end note

|System|
:Validate Data;

|Database|
:Store Metadata;

|Admin|
:Add Questions;

|System|
:Parse Questions;

|Database|
:Persist Questions;

|Admin|
:Configure Scoring;
:Publish Exam;

|System|
:Update Status;

|Database|
:Update DB Status;

|Peserta|
:Login;

|System|
:Authenticate;

|Database|
:Load Profile;

|Peserta|
:View Exams;

|System|
:Query Exams;

|Database|
:Fetch Exams;

|Peserta|
:Start Exam;

|System|
:Init Result;

|Database|
:Create Result;

|System|
:Fetch Questions;

|Database|
:Query Questions;

|System|
:Shuffle Questions;

|Peserta|
:Display Questions;

repeat
  :Answer Question;
  
  |System|
  if (Correct Answer?) then (yes)
    :Mark Correct;
  else (no)
    :Mark Incorrect;
  endif
  
  :Store Answer;
  
  |Database|
  :Persist Answer;
  
  |System|
repeat while (More Questions?) is (yes) not (no)

|Peserta|
:Submit Exam;

|System|
:Calculate Score;

if (Pass Score?) then (yes)
  :Set Status PASS;
else (no)
  :Set Status FAIL;
endif

:Update Result;

|Database|
:Save Results;

|Peserta|
:View Result;

|Admin|
:View Reports;

|System|
:Generate Stats;

|Database|
:Aggregate Data;

stop

@enduml
